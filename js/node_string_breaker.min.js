import{codePointFullWidth}from"https://cdn.jsdelivr.net/gh/Amourspirit/node-utf16-char-codes@0ce6dad4c70cbb65b11b15e64ec4648ec5a02095/js/node_utf16_char_codes.min.js";export var splitByOpt;!function(t){t[t.width=0]="width",t[t.word=1]="word",t[t.line=2]="line"}(splitByOpt||(splitByOpt={}));export var lnEndOpt;!function(t){t[t.none=0]="none",t[t.noLnBr=1]="noLnBr",t[t.encode=2]="encode"}(lnEndOpt||(lnEndOpt={}));export var widthFlags;!function(t){t[t.none=0]="none",t[t.fullwidth=1]="fullwidth",t[t.surrogatePair=2]="surrogatePair",t[t.nearestWord=4]="nearestWord"}(widthFlags||(widthFlags={}));export const stringBreaker=(t,e)=>{if("string"!=typeof t)throw new TypeError("stringBreaker: str parmeter must be of type string");const n=getOptions({width:80,lnEnd:lnEndOpt.noLnBr,noExSp:!1,noBOM:!0,lenOpt:widthFlags.none,splitOpt:splitByOpt.width},e);if(n.splitOpt===splitByOpt.width)switch(n.lnEnd){case lnEndOpt.encode:t=encodeLnBr(t);break;case lnEndOpt.noLnBr:t=removeLnBr(t)}let r;switch(!0===n.noExSp&&(t=removeExSp(t)),n.splitOpt){case splitByOpt.word:case splitByOpt.line:r=breakStrByEolWord(t,n);break;default:r=breakStrByCodePoint(t,n)}return r};const getOptions=(t,e)=>null==e||"function"==typeof e?t:("number"==typeof e&&((t=Object.assign({},t)).width=e,e=t),void 0===e.width&&(e.width=80),void 0===e.lnEnd&&(e.lnEnd=lnEndOpt.noLnBr),void 0===e.noExSp&&(e.noExSp=!1),void 0===e.noBOM&&(e.noBOM=!0),void 0===e.lenOpt&&(e.lenOpt=widthFlags.none),void 0===e.splitOpt&&(e.splitOpt=splitByOpt.width),e),breakStrByEolWord=(t,e)=>{let n=[];if(0===t.length)return n;let r=!1;if(!0===e.noBOM&&(r=!0),!0===r){const e=Number(t.codePointAt(0));if(!0===isBom(e)&&0===(t=t.substr(1)).length)return n}if(t=cleanLnBr(t),e.splitOpt===splitByOpt.word){if(0===(t=(t=whiteSpToSp(t)).trim()).length)return n;n=t.split(" ")}else{if(0===t.length)return n;n=t.split(/\n/)}return n},breakStrByCodePoint=(t,e)=>{const n=Math.round(Number(e.width));if(n<1)throw new RangeError("stringBreaker: Width must be greater than zero");const r=[];let i=[],o=!1,s=!1,l=!1,p=!1;if(void 0!==e.lenOpt){const t=7;if(e.lenOpt<widthFlags.none||e.lenOpt>t)throw new RangeError(`stringBreaker: widthflags enum out of range. Expected value to be from ${widthFlags.none} to ${t}`);(e.lenOpt&widthFlags.fullwidth)===widthFlags.fullwidth&&(s=!0),(e.lenOpt&widthFlags.surrogatePair)===widthFlags.surrogatePair&&(l=!0),(e.lenOpt&widthFlags.nearestWord)===widthFlags.nearestWord&&(p=!0)}!0===e.noBOM&&(o=!0);let a=0;for(let e=0;e<t.length;e++){const d=t.codePointAt(e);if(void 0===d)throw new Error("stringBreaker Error: No code point exist in first parameter str at postion "+e);const h=Number(d),c=String.fromCodePoint(h);if(0===e)if(!0===o){if(!0===isBom(h))continue}else if(!0===isBom(h)){i.push(c);continue}if(!0===isSurrogatePair(h)&&e++,!0!==p||0!==i.length||!0!==isWhiteSpace(h)||!1!==isPrintableWhiteSpace(h)){if(a++,!0===s&&!0===codePointFullWidth(h)&&a++,!0===l&&!0===isSurrogatePair(h)&&a++,!0===p){if(!1===isWhiteSpace(h)){i.push(c);continue}if(!0===isNonBreakSpace(h)){i.push(c);continue}(!0===isPrintableWhiteSpace(h)||a<n)&&i.push(c)}else i.push(c);a>=n&&(r.push(i.join("")),i=[],a=0)}}return i.length>0&&(r.push(i.join("")),i=[]),r},isZSpace=t=>-1!==[32,160,5760,8239,8287,12288].indexOf(t)||t>=8192&&t<=8202,isWhiteSpace=t=>-1!==[133,8233].indexOf(t)||(t>=9&&t<=13||!0===isZSpace(t)),isNonBreakSpace=t=>160===t||8239===t,isPrintableWhiteSpace=t=>5760===t,removeLnBr=t=>0===t.length?"":t.replace(/(\r\n|\n|\r)/gm,""),whiteSpToSp=t=>0===t.length?"":t.replace(/\s+/gm," "),cleanLnBr=t=>0===t.length?"":t.replace(/(\r\n|\r)/gm,"\n"),removeExSp=t=>0===t.length?"":t.replace(/\x20\x20+/g," "),encodeLnBr=t=>t.replace(/(\r\n|\n|\r)/gm,"\\n"),isSurrogatePair=t=>t>=65536,isBom=t=>65279===t||65534===t||15711167===t||185479870509===t||724530744===t||724530745===t||724530726===t;
//# sourceMappingURL=node_string_breaker.min.js.map